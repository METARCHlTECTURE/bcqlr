---
title: Linux Shell Programming Cheatsheet
categories: 03-Linux
tags: Cheatsheet
---

## Shell Programming

### 1. **变量与参数**

| 语法             | 描述                     | 示例                                      |
|------------------|--------------------------|-------------------------------------------|
| `variable=value` | 定义变量                 | `name="Alice"`                            |
| `$variable`      | 调用变量                 | `echo $name`                              |
| `$#`             | 参数个数                 | `echo $#`                                 |
| `$*` 或 `$@`     | 所有参数                 | `echo $*`                                 |
| `$0`             | 脚本名称                 | `echo $0`                                 |
| `$1`、`$2`...    | 第 n 个参数              | `echo $1`                                 |

### 2. **算术运算**

| 语法                           | 描述             | 示例                                    |
|--------------------------------|------------------|-----------------------------------------|
| `$((expression))`              | 算术计算         | `result=$((a + b))`                     |
| `expr expression`              | 使用 expr 计算   | `result=$(expr $a \* $b)`               |
| `let "variable=expression"`    | let 命令计算     | `let "sum=a+b"`                         |

### 3. **条件判断**

| 语法                               | 描述                       | 示例                                                |
|------------------------------------|----------------------------|-----------------------------------------------------|
| `[ condition ]`                    | 条件测试                   | `[ $a -lt $b ]`                                     |
| `test condition`                   | 使用 test 命令测试         | `test $a -eq $b`                                    |
| `[[ condition ]]`                  | 高级测试（支持模式匹配）   | `[[ $string == *"test"* ]]`                         |
| 文件测试运算符                     | -e、-f、-d、-r、-w、-x 等  | `[ -f "filename" ]`                                 |
| 字符串比较                         | `=`, `!=`, `<`, `>`        | `[ "$a" = "$b" ]`                                   |
| 数值比较                           | `-eq`, `-ne`, `-lt` 等     | `[ $a -ge $b ]`                                     |

### 4. **条件语句**

| 语法               | 描述         | 示例                                                                                                                                     |
|--------------------|--------------|------------------------------------------------------------------------------------------------------------------------------------------|
| `if...then...fi`   | 简单条件     | ```bash<br>if [ $a -gt $b ]; then<br>  echo "$a is greater"<br>fi<br>```                                                                |
| `if...elif...else` | 多分支条件   | ```bash<br>if [ $a -gt $b ]; then<br>  echo "$a > $b"<br>elif [ $a -eq $b ]; then<br>  echo "$a = $b"<br>else<br>  echo "$a < $b"<br>fi<br>``` |
| `case...in...esac` | 多重选择     | ```bash<br>case "$variable" in<br>  "value1")<br>    command1;;<br>  "value2")<br>    command2;;<br>  *)<br>    default_command;;<br>esac<br>``` |

### 5. **循环语句**

| 语法                | 描述             | 示例                                                                                  |
|---------------------|------------------|---------------------------------------------------------------------------------------|
| `for` 循环          | 遍历列表或范围   | ```bash<br>for i in {1..5}; do<br>  echo $i<br>done<br>```                           |
| `while` 循环        | 条件为真则执行   | ```bash<br>while [ $a -lt 10 ]; do<br>  echo $a<br>  a=$((a+1))<br>done<br>```       |
| `until` 循环        | 条件为假则执行   | ```bash<br>until [ $a -ge 10 ]; do<br>  echo $a<br>  a=$((a+1))<br>done<br>```       |
| `break` 和 `continue` | 控制循环流程   | 在循环中使用 `break` 退出循环，使用 `continue` 跳过本次循环                           |

### 6. **函数**

| 语法                | 描述           | 示例                                                      |
|---------------------|----------------|-----------------------------------------------------------|
| 定义函数            | 创建可重用代码 | ```bash<br>function_name() {<br>  commands<br>}<br>```    |
| 调用函数            | 执行函数       | `function_name`                                           |
| 带参数的函数        | 传递参数       | ```bash<br>myfunc() {<br>  echo $1 $2<br>}<br>myfunc arg1 arg2<br>``` |

### 7. **输入输出与文件操作**

| 语法                   | 描述                 | 示例                                |
|------------------------|----------------------|-------------------------------------|
| `echo`                 | 输出文本或变量       | `echo "Hello World"`                |
| `read`                 | 从输入读取数据       | `read variable_name`                |
| 重定向输出 `>`、`>>`   | 将输出写入文件       | `echo "Text" > file.txt`            |
| 重定向输入 `<`         | 从文件读取输入       | `command < input.txt`               |
| 管道 `|`               | 将一个命令的输出作为下一个命令的输入 | `ls | grep "txt"`       |

### 8. **数组**

| 语法                             | 描述                     | 示例                                                  |
|----------------------------------|--------------------------|-------------------------------------------------------|
| 定义数组                         | 创建数组                 | `array=(element1 element2 element3)`                  |
| 访问数组元素                     | 通过索引访问             | `echo ${array[0]}`                                    |
| 获取数组长度                     | 元素个数                 | `echo ${#array[@]}`                                   |
| 遍历数组                         | 循环访问                 | ```bash<br>for i in "${array[@]}"; do<br>  echo $i<br>done<br>``` |

### 9. **字符串操作**

| 语法                               | 描述                     | 示例                                   |
|------------------------------------|--------------------------|----------------------------------------|
| 字符串长度                         | 获取字符串长度           | `echo ${#string}`                      |
| 子字符串提取                       | 提取部分字符串           | `echo ${string:position:length}`       |
| 字符串替换                         | 替换字符串中的内容       | `echo ${string/old/new}`               |

### 10. **实用命令**

| 语法                   | 描述                   | 示例                             |
|------------------------|------------------------|----------------------------------|
| `grep 'pattern' file`  | 搜索文件中匹配的行     | `grep "text" filename.txt`       |
| `awk '{action}' file`  | 文本处理工具           | `awk '{print $1}' filename.txt`  |
| `sed 's/old/new/g' file` | 流编辑器，替换文本   | `sed 's/oldtext/newtext/g' file` |
| `chmod permissions file` | 更改文件权限         | `chmod 755 script.sh`            |

### 11. **进程控制**

| 语法                      | 描述                         | 示例                                |
|---------------------------|------------------------------|-------------------------------------|
| `&`                       | 后台运行命令                 | `command &`                         |
| `jobs`                    | 查看当前后台任务             | `jobs`                              |
| `fg %jobnumber`           | 将后台任务调至前台           | `fg %1`                             |
| `kill PID`                | 终止进程                     | `kill 1234`                         |

### 12. **特殊变量**

| 变量         | 描述                               | 示例               |
|--------------|------------------------------------|--------------------|
| `$?`         | 上个命令的退出状态（0 为成功）     | `echo $?`          |
| `$$`         | 当前 Shell 脚本的进程 ID           | `echo $$`          |
| `$(command)` | 命令替换，获取命令执行结果         | `files=$(ls *.txt)`|


##  **Linux 终端使用技巧**

### 1. **导航和文件管理**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `cd -`                         | 快速返回上一个目录                | `cd -`                                    |
| `cd ..`                        | 返回上一级目录                    | `cd ..`                                   |
| `pushd` 和 `popd`              | 在目录间快速切换                  | `pushd /path/to/dir` 和 `popd`            |
| `ls -lh`                       | 列出文件，以人类可读格式显示大小  | `ls -lh`                                  |
| `ls -a`                        | 显示所有文件，包括隐藏文件        | `ls -a`                                   |
| `tree`                         | 以树形结构显示目录                | `tree`                                    |

### 2. **历史记录与快捷键**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `history`                      | 查看命令历史                      | `history`                                 |
| `!number`                      | 执行历史中的某条命令              | `!100` （执行历史中的第 100 条命令）       |
| `!!`                           | 重新执行上一条命令                | `!!`                                      |
| `Ctrl + R`                     | 搜索历史记录中的命令              | 按下 `Ctrl + R` 然后输入关键字            |
| `Ctrl + A`                     | 将光标移动到行首                  |                                           |
| `Ctrl + E`                     | 将光标移动到行尾                  |                                           |
| `Ctrl + U`                     | 删除光标前的内容                  |                                           |
| `Ctrl + K`                     | 删除光标后的内容                  |                                           |
| `Ctrl + L`                     | 清屏，相当于 `clear`              |                                           |

### 3. **I/O 重定向与管道**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `>`                            | 将输出重定向到文件（覆盖）        | `echo "Hello" > file.txt`                 |
| `>>`                           | 将输出追加到文件                  | `echo "World" >> file.txt`                |
| `<`                            | 将文件内容作为命令的输入          | `cat < file.txt`                          |
| `2>`                           | 将错误信息输出到文件              | `command 2> error.log`                    |
| `&>`                           | 将输出和错误同时重定向            | `command &> output.log`                   |
| `|`                            | 管道，将一个命令的输出传递给下一个命令 | `ls | grep "file"`                     |

### 4. **文本操作**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `cat`                          | 显示文件内容                      | `cat file.txt`                            |
| `less`                         | 分页查看文件内容                  | `less file.txt`                           |
| `head` 和 `tail`               | 查看文件的前几行/后几行           | `head -n 10 file.txt` 或 `tail -n 10 file.txt` |
| `grep "pattern"`               | 搜索文本中的模式                  | `grep "hello" file.txt`                   |
| `sort`                         | 对文本排序                        | `sort file.txt`                           |
| `uniq`                         | 删除重复行                        | `uniq file.txt`                           |

### 5. **进程管理**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `top`                          | 实时查看系统进程                  | `top`                                     |
| `ps aux`                       | 显示所有正在运行的进程            | `ps aux`                                  |
| `kill`                         | 终止进程                          | `kill 1234` （终止进程 ID 为 1234 的进程）|
| `killall`                      | 终止指定名称的所有进程            | `killall firefox`                         |
| `bg`                           | 将任务转为后台执行                | `bg %1`                                   |
| `fg`                           | 将后台任务转回前台                | `fg %1`                                   |

### 6. **别名与快捷命令**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `alias`                        | 创建命令别名                      | `alias ll="ls -lah"`                      |
| `unalias`                      | 删除别名                          | `unalias ll`                              |
| `alias` 显示当前所有别名       | 列出所有设置的别名                | `alias`                                   |

### 7. **归档与压缩**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `tar -czvf archive.tar.gz dir/` | 压缩目录为 tar.gz 文件             | `tar -czvf archive.tar.gz /path/to/dir`   |
| `tar -xzvf archive.tar.gz`      | 解压 tar.gz 文件                  | `tar -xzvf archive.tar.gz`                |
| `zip -r archive.zip dir/`       | 压缩目录为 zip 文件               | `zip -r archive.zip /path/to/dir`         |
| `unzip archive.zip`             | 解压 zip 文件                     | `unzip archive.zip`                       |

### 8. **SSH 远程连接**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `ssh user@host`                | 通过 SSH 连接到远程主机           | `ssh user@192.168.1.1`                    |
| `scp file user@host:/path`     | 使用 SCP 复制文件到远程主机       | `scp file.txt user@192.168.1.1:/path`     |
| `rsync -avz source destination` | 同步文件夹到远程主机              | `rsync -avz /local/path user@host:/remote/path` |

### 9. **环境变量与路径**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `export VAR=value`             | 设置环境变量                      | `export PATH=$PATH:/new/path`             |
| `echo $PATH`                   | 查看 PATH 环境变量                | `echo $PATH`                              |
| `which command`                | 查看命令所在路径                  | `which python`                            |

### 10. **其他实用命令**
| 技巧                           | 描述                              | 示例                                      |
|--------------------------------|-----------------------------------|-------------------------------------------|
| `df -h`                        | 查看磁盘使用情况                  | `df -h`                                   |
| `du -sh`                       | 查看目录大小                      | `du -sh /path/to/dir`                     |
| `uptime`                       | 查看系统运行时间                  | `uptime`                                  |
| `uname -a`                     | 查看系统信息                      | `uname -a`                                |
| `chmod`                        | 修改文件权限                      | `chmod 755 script.sh`                     |
| `chown`                        | 更改文件所有者                    | `chown user:group file.txt`               |